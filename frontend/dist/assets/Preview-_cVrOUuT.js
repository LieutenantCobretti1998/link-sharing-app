import{b as E,a as L,c as D,l as f,t as R,H as B,j as e,S as F,J as G,K as I}from"./index-CO1j_CrX.js";import{b as M,p as m}from"./BackgroundImages-BsBB-TAp.js";import{M as N}from"./Modal-DvG93ssc.js";import{h as u,a as z,r as T}from"./ColorsConversion-vBm-ZwjX.js";import{U as $}from"./UseHandleSessionExpired-CWwRvirK.js";import{u as q}from"./useQuery-BuXA3JmA.js";import"./utils-CNWZQOcT.js";function Q(){const c=E(),p=$(),{id:n}=L(),{data:a,isLoading:b}=q({queryKey:["linksGroupPreview",n],queryFn:()=>I(n),enabled:!!n,onError:r=>{r.message==="Session expired. Please log in again."&&p()},keepPreviousData:!0}),{linksGroupName:j,links:w,shortDescription:k,linksGroupImage:x,textColor:l,commonColor:s,backgroundColor:i,backgroundImage:g,showModal:d}=n?a||{}:D(r=>r.saveChooses);f.useEffect(()=>{if(d){const r=setTimeout(()=>{c(R(!1))},5e3);return()=>clearTimeout(r)}},[d]),f.useEffect(()=>{a&&a.shorten_url&&c(B(a.shorten_url))},[a,c]);const v=r=>{const o=M.find(t=>t.value===r);return o?o.image:null},C=r=>{const o=m.find(t=>t.label===r);return o?o.color:null},y=r=>{const o=m.find(t=>t.label===r);return o?o.icon:null},S=()=>{const r=u(l),o=u(s),t=u(i),h=z([r,o,t]),P=T(h.r,h.g,h.b);c(G(P))};return f.useEffect(()=>{l&&s&&i&&l!=="#333333"&&s!=="#D9D9D9"&&i!=="#FFF"&&S()},[l,s,i]),b&&n?e.jsx(F,{}):e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"max-xs:top-[-140px] max-xs:h-1/2 drop-shadow-md relative top-[-120px] rounded-xl h-auto flex flex-col align-center justify-center",style:{backgroundColor:g?"white":i,backgroundImage:`url(${v(g)})`,backgroundSize:"cover",backgroundPosition:"center"},children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"300",height:"585",children:[x?e.jsx("foreignObject",{x:"105",y:"64",width:"96",height:"96",clipPath:"url(#screenClip)",className:"rounded-full border-4",style:{borderColor:s},children:e.jsx("div",{className:"w-full h-full",children:e.jsx("img",{src:x,alt:"Links Group",className:"w-full h-full"})})}):e.jsx("circle",{cx:"153.5",cy:"112",r:"48",fill:s}),e.jsx("rect",{width:"270",height:"20",x:"18",y:"185",fill:s,rx:"8"}),e.jsx("text",{x:"155",y:"195",fill:l,fontSize:"12",textAnchor:"middle",dominantBaseline:"middle",children:j}),e.jsx("rect",{width:"278",height:"30",x:"12",y:"214",fill:s,rx:"4"}),e.jsx("text",{x:"155",y:"230",fill:l,fontSize:"10",textAnchor:"middle",dominantBaseline:"middle",children:k}),w.map((r,o)=>e.jsx("g",{children:e.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx("rect",{width:"237",height:"44",x:"35",y:270+o*64,fill:C(r.label),rx:"8"}),e.jsx("g",{transform:`translate(45, ${284+o*64})`,children:y(r.label)}),e.jsx("text",{x:"70",y:296+o*64,fontSize:"14",fill:"white",children:r.label||`Link #${o+1}`}),e.jsx("g",{transform:`translate(250, ${284+o*64})`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:e.jsx("path",{fill:"#fff",d:"M2.667 7.333v1.334h8L7 12.333l.947.947L13.227 8l-5.28-5.28L7 3.667l3.667 3.666h-8Z"})})})]})},r.id))]})}),e.jsx(N,{text:"Please check the required fields in the profile section",isVisible:d})]})}export{Q as default};
