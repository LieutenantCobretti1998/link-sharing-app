const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MobileOverview-oRQM-LL-.js","assets/index-CO1j_CrX.js","assets/index-CkriVe-U.css"])))=>i.map(i=>d[i]);
import{j as e,l as c,n as I,a as z,i as O,k as R,b as T,c as u,o as $,p as q,q as G,t as W,S as J,v as K,w as Q,x as X,y as Y,z as ee,A as te,B as le}from"./index-CO1j_CrX.js";import{u as ae,B as j}from"./Button-NZCaMi1l.js";import{S as se}from"./react-select.esm-CSm14oz-.js";import{p,b as ie}from"./BackgroundImages-BsBB-TAp.js";import{M as ne}from"./Modal-DvG93ssc.js";import{U as oe}from"./UseHandleSessionExpired-CWwRvirK.js";import{U as de}from"./UseWindowSize-3CNGpbY4.js";import"./utils-CNWZQOcT.js";const re={control:(i,o)=>({...i,borderColor:o.isFocused?"#A855F7":"#A3A3A3",boxShadow:o.isFocused?"0 0 0 1px #A855F7":"none"}),option:(i,o)=>({...i,backgroundColor:o.isSelected?"#A855F7":o.isFocused?"#EDE9FE":"white",color:o.isSelected?"white":"black"}),menu:i=>({...i,backgroundColor:"white",border:"1px solid #A3A3A3",borderRadius:"0.375rem"}),dropdownIndicator:(i,o)=>({...i,color:"#BEADFF"})};function ce({id:i,index:o,onUpdate:x,onDelete:v,errors:a,findLinkById:n}){const g=r=>{x(i,{label:r.label})},d=r=>{let m=r.target.value.trim();m=m.replace(/\s+/g,""),x(i,{url:m})},f=()=>{v(i)};return e.jsxs("div",{className:"mb-4 flex flex-col gap-3 bg-light-grey p-3 border-[.5px] rounded-md border-light-grey",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"6",fill:"none",viewBox:"0 0 12 6",children:e.jsx("path",{fill:"#737373",d:"M0 0h12v1H0zM0 5h12v1H0z"})}),e.jsxs("h3",{className:"text-lightBlack-2 font-instrumentSemiBold",children:["Link#",o]})]}),e.jsx("button",{onClick:()=>f(),className:"text-lightBlack-2 font-instrumentNormal hover:text-red-500 focus:outline-none",children:"Remove"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm text-lightBlack-2 mb-2",children:"Platform"}),e.jsx(se,{options:p,getOptionLabel:r=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[r.label,e.jsx("span",{className:"mr-2",children:r.icon})]}),defaultValue:p.find(r=>r.label===n.label),onChange:g,styles:re,required:!0})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lightBlack-2 font-instrumentSemiBold",children:"Link"}),e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:e.jsx("path",{fill:"#737373",d:"M8.523 11.72a.749.749 0 0 1 0 1.063l-.371.371A3.751 3.751 0 1 1 2.847 7.85l1.507-1.506A3.75 3.75 0 0 1 9.5 6.188a.753.753 0 0 1-1 1.125 2.25 2.25 0 0 0-3.086.091L3.908 8.91a2.25 2.25 0 0 0 3.183 3.183l.37-.371a.748.748 0 0 1 1.062 0Zm4.63-8.874a3.756 3.756 0 0 0-5.305 0l-.371.37A.751.751 0 1 0 8.539 4.28l.372-.37a2.25 2.25 0 0 1 3.182 3.182l-1.507 1.507a2.25 2.25 0 0 1-3.086.09.753.753 0 0 0-1 1.125 3.75 3.75 0 0 0 5.144-.152l1.507-1.507a3.756 3.756 0 0 0 .002-5.307v-.001Z"})}),e.jsx("input",{required:!0,onChange:d,placeholder:n.url,className:`truncate relative w-full pl-10 bg-white p-3 border-[.5px] rounded-md ${a!=null&&a.emptyUrl||a!=null&&a.invalidPlatform||a!=null&&a.invalidUrl?"border-red":"border-lightBlack-2"} focus:outline-primaryPurple`,type:"text"}),e.jsx("svg",{className:"absolute inset-y-0 top-4 left-3",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:e.jsx("path",{fill:"#737373",d:"M8.523 11.72a.749.749 0 0 1 0 1.063l-.371.371A3.751 3.751 0 1 1 2.847 7.85l1.507-1.506A3.75 3.75 0 0 1 9.5 6.188a.753.753 0 0 1-1 1.125 2.25 2.25 0 0 0-3.086.091L3.908 8.91a2.25 2.25 0 0 0 3.183 3.183l.37-.371a.748.748 0 0 1 1.062 0Zm4.63-8.874a3.756 3.756 0 0 0-5.305 0l-.371.37A.751.751 0 1 0 8.539 4.28l.372-.37a2.25 2.25 0 0 1 3.182 3.182l-1.507 1.507a2.25 2.25 0 0 1-3.086.09.753.753 0 0 0-1 1.125 3.75 3.75 0 0 0 5.144-.152l1.507-1.507a3.756 3.756 0 0 0 .002-5.307v-.001Z"})}),(a==null?void 0:a.emptyUrl)&&e.jsx("span",{className:"text-red text-sm absolute right-[10px] bottom-[15px]",children:a.emptyUrl}),(a==null?void 0:a.invalidPlatform)&&e.jsx("span",{className:"text-red text-sm absolute right-[10px] bottom-[1px]",children:a.invalidPlatform}),(a==null?void 0:a.invalidUrl)&&e.jsx("span",{className:"text-red text-sm absolute right-[10px] bottom-[1px]",children:a.invalidUrl})]})]})]})}const he=c.lazy(()=>I(()=>import("./MobileOverview-oRQM-LL-.js"),__vite__mapDeps([0,1,2])));function we(){const{id:i}=z(),{width:o}=de(),x=O(),v=oe(),a=R(),n=T(),g=u(t=>t.link.showForm),d=u(t=>t.link.links),f=u(t=>t.link),r=u(t=>t.profile),[m,w]=c.useState({}),[k,b]=c.useState(!1),y=localStorage.getItem("current-profile"),L=(y?JSON.parse(y):null).profile_name,N=g||d.length>0,{mutate:F}=ae({mutationFn:le,mutationKey:["update-link"],onSuccess:()=>{x(`/${L}/edit-links/${i}`)},onError:t=>{t.message==="Session expired. Please log in again."&&v()}});c.useEffect(()=>{if(i){const{links:t,...l}=a;n($(t)),n(q(l)),n(G(a))}},[a]),c.useEffect(()=>{const t=setTimeout(()=>{b(!1)},5e3);return()=>{clearTimeout(t)}},[k]),c.useEffect(()=>{n(W(!1))},[n]);const E=()=>{n(K()),n(Q())},S=()=>{const t=M();Object.keys(t).length===0&&(b(!0),F({id:i,links:d}))},A=t=>{n(X(t)),n(Y(t))},B=(t,l)=>{n(ee({id:t,updates:l}))},U=t=>{const l=p.find(s=>s.label===t);return l?l.icon:null},V=(t,l)=>{const s=l.find(h=>h.id===t);return s?{label:s.label!==""?s.label:"Github",url:s.url!==""?s.url:"https://github.com/LieutenantCobretti1998/link-sharing-app"}:{label:"Github",url:"https://github.com/LieutenantCobretti1998/link-sharing-app"}},C=c.useMemo(()=>d.reduce((t,l)=>(t[l.id]=V(l.id,d),t),{}),[d]),P=t=>{const l=p.find(s=>s.label===t);return l?l.color:null},H=t=>{const l=ie.find(s=>s.value===t);return l?l.image:null},D=t=>{let l={};if(t.url)try{const h=new URL(t.url).hostname.replace("www.",""),Z=p.find(_=>_.label===t.label);(!Z||h!==Z.allowedDomain)&&(l.invalidPlatform="Invalid Platform")}catch{l.invalidUrl="Invalid URL format"}else return l.emptyUrl="This field cannot be empty",l;return l},M=()=>{let t=!1,l={};if(d.forEach(s=>{const h=D(s);Object.keys(h).length>0&&(t=!0,l[s.id]=h)}),t)return w(l),l;w({}),l={},b(!0);for(const s in f)s!=="showForm"&&n(te({field:s,value:f[s]}));return l};return e.jsxs(e.Fragment,{children:[o>1280&&e.jsx(c.Suspense,{fallback:e.jsx(J,{}),children:e.jsx(he,{profile:r,getBackgroundImage:H,links:d,getPlatformColor:P,getPlatformIcon:U})}),e.jsxs("section",{className:"w-full bg-white p-10 relative rounded-md border-light-grey",children:[e.jsxs("div",{className:"pb-12",children:[e.jsx("h2",{className:"max-xs:text-[1.2rem] font-bold text-lightBlack-1 text-3xl",children:"Customize your links"}),e.jsx("p",{className:"font-normal text-lightBlack-2 text-base",children:"Add/edit/remove links below and then share all your profiles with the world!"})]}),e.jsx("div",{className:"w-full pb-12",children:e.jsx(j,{disabled:d.length===5,onclick:E,type:"addLink",children:"+ Add new Link"})}),N?d.map((t,l)=>e.jsx(ce,{id:t.id,index:l+1,onUpdate:B,onDelete:A,errors:m[t.id],findLinkById:C[t.id]},t.id)):e.jsxs("div",{className:"max-xs:h-1/2 flex bg-light-grey items-center flex-col p-10 gap-4 pb-12 rounded-md border-light-grey",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"250",height:"161",fill:"none",viewBox:"0 0 250 161",children:[e.jsx("path",{fill:"#fff",d:"M48.694 15.421C23.379 25.224 4.594 50.068.858 80.128c-3.12 25.331 4.335 53.318 48.23 61.291 85.406 15.52 173.446 17.335 193.864-24.525 20.417-41.86-7.525-108.891-50.873-113.53C157.683-.326 98.146-3.721 48.694 15.42Z",opacity:".3"}),e.jsx("path",{fill:"#333",d:"M157.022 9.567H93.044a7.266 7.266 0 0 0-7.266 7.267v120.91a7.266 7.266 0 0 0 7.266 7.266h63.978a7.266 7.266 0 0 0 7.267-7.266V16.834a7.266 7.266 0 0 0-7.267-7.267Z"}),e.jsx("path",{fill:"#333",d:"M125.033 140.872a5.687 5.687 0 1 0 0-11.374 5.687 5.687 0 0 0 0 11.374Z",opacity:".03"}),e.jsx("path",{fill:"#EFEBFF",d:"M156.628 21.321H93.431V126.78h63.197V21.321Z"}),e.jsx("path",{fill:"#333",d:"M117.797 120.508a2.065 2.065 0 1 0 0-4.13 2.065 2.065 0 0 0 0 4.13Z",opacity:".03"}),e.jsx("path",{fill:"#fff",d:"M125.033 120.508a2.066 2.066 0 1 0 0-4.132 2.066 2.066 0 0 0 0 4.132Z",opacity:".44"}),e.jsx("path",{fill:"#333",d:"M132.269 120.508a2.066 2.066 0 1 0 0-4.132 2.066 2.066 0 0 0 0 4.132ZM148.199 32.953h-46.332v39.552h46.332V32.953ZM134.373 80.129h-32.506v3.621h32.506V80.13ZM148.199 80.129h-11.632v3.621h11.632V80.13ZM117.053 91.237h-15.186v3.622h15.186v-3.622ZM148.199 91.237H120.28v3.622h27.919v-3.622ZM136.954 102.353h-35.087v3.622h35.087v-3.622Z",opacity:".03"}),e.jsx("path",{fill:"#EFEBFF",d:"M78.656 21.321H15.459V126.78h63.197V21.321Z"}),e.jsx("path",{fill:"#fff",d:"M39.825 120.508a2.065 2.065 0 1 0 0-4.13 2.065 2.065 0 0 0 0 4.13Z",opacity:".44"}),e.jsx("path",{fill:"#333",d:"M47.061 120.508a2.065 2.065 0 1 0 0-4.13 2.065 2.065 0 0 0 0 4.13ZM54.297 120.508a2.065 2.065 0 1 0 0-4.13 2.065 2.065 0 0 0 0 4.13ZM70.227 32.953H23.895v39.552h46.332V32.953ZM56.4 80.129H23.895v3.621H56.4V80.13ZM70.227 80.129H58.595v3.621h11.632V80.13ZM39.08 91.237H23.896v3.622H39.08v-3.622ZM70.227 91.237h-27.92v3.622h27.92v-3.622ZM58.982 102.353H23.895v3.622h35.087v-3.622Z",opacity:".03"}),e.jsx("path",{fill:"#EFEBFF",d:"M234.6 21.321h-63.197V126.78H234.6V21.321Z"}),e.jsx("path",{fill:"#333",d:"M195.769 120.508a2.065 2.065 0 1 0 0-4.13 2.065 2.065 0 0 0 0 4.13ZM203.005 120.508a2.066 2.066 0 1 0 0-4.132 2.066 2.066 0 0 0 0 4.132Z",opacity:".03"}),e.jsx("path",{fill:"#fff",d:"M210.242 120.508a2.066 2.066 0 1 0-.001-4.131 2.066 2.066 0 0 0 .001 4.131Z",opacity:".44"}),e.jsx("path",{fill:"#333",d:"M226.171 32.953h-46.332v39.552h46.332V32.953ZM212.345 80.129h-32.506v3.621h32.506V80.13ZM226.171 80.129h-11.632v3.621h11.632V80.13ZM195.025 91.237h-15.186v3.622h15.186v-3.622ZM226.179 91.237H198.26v3.622h27.919v-3.622ZM214.926 102.353h-35.087v3.622h35.087v-3.622Z",opacity:".03"}),e.jsx("path",{fill:"#333",d:"M146.597 145.041c0-.76-1.61-31.891-.577-36.522 1.033-4.632 10.509-27.274 8.011-29.917-2.498-2.642-11.648 3.372-11.648 3.372s1.671-27.267-2.278-29.21c-3.948-1.944-5.702 5.671-5.702 5.671L132.3 88.936l-10.418 55.96 24.715.145Z",opacity:".1"}),e.jsx("path",{fill:"#F4A28C",d:"M139.559 113.295c1.328-5.316 3.325-10.502 4.601-15.87.843-3.553 6.295-18.405 7.821-22.779.47-1.344.873-2.969-.038-4.062a2.646 2.646 0 0 0-2.422-.76 4.842 4.842 0 0 0-2.339 1.223c-1.519 1.337-4.32 7.95-6.371 7.943-2.482 0-1.313-6.834-1.381-8.148-.281-5.656.136-12.908-2.073-18.223-1.64-3.948-5.71-3.417-6.667.85-.957 4.268-.919 22.15-.919 22.15s-15.884-2.727-18.595 2.118c-2.711 4.844 1.868 35.618 1.868 35.618l26.515-.06Z"}),e.jsx("path",{fill:"#633CFF",d:"m141.495 160.5-.289-48.906-29.681-6.515L99.574 160.5h41.921Z"}),e.jsx("path",{fill:"#333",d:"m141.495 160.5-.289-48.906-14.168-3.113-2.536 52.019h16.993Z",opacity:".1"})]}),e.jsx("h2",{className:"max-xs:text-[1.2rem] font-bold text-lightBlack-1 text-3xl",children:"Lets get you started"}),e.jsx("p",{className:"max-xs:text-[.9rem] text-center",children:"Use the “Add new link” button to get started. Once you have more than one link, you can reorder and edit them. We’re here to help you share your profiles with everyone!"})]}),e.jsx("div",{className:"border-t border-light-grey-100 mt-10 -mx-10"}),e.jsx("div",{className:"mt-10 text-end",children:i?e.jsx(j,{onclick:S,type:"save",children:"Update"}):e.jsx(j,{onclick:M,type:"save",children:"Save"})}),e.jsx(ne,{isVisible:k,text:"Links saved successfully"})]})]})}export{we as default};
