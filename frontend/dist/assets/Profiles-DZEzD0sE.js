import{g as n,f as a}from"./index-DjIB6WbY.js";const l=async s=>{const e=await fetch("/api/create_profile",{method:"POST",body:JSON.stringify({new_profile_name:s}),headers:{"Content-Type":"application/json","X-CSRF-TOKEN":n()}}),r=await e.json();if(!e.ok)throw e.status===401&&!await a()?new Error("Session expired. Please log in again."):new Error(r.message);return r},c=async()=>{const s=await fetch("/api/related-profiles",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),e=await s.json();if(!s.ok)throw s.status===401&&!await a()?new Error("Session expired. Please log in again."):new Error(e.message);return e},p=async s=>{const e=await fetch(`/api/choose_profile/${s}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),r=await e.json();if(!e.ok)throw e.status===401&&!await a()?new Error("Session expired. Please log in again."):new Error(r.message);return r},d=async s=>{const e=localStorage.getItem("current-profile"),r=JSON.parse(e);if(!r)throw new Error("Profile is missed!");const o=await fetch(`/api/change-profile-name/${r.profile_id}/${r.profile_name}`,{method:"PATCH",body:JSON.stringify({new_profile_name:s}),headers:{"Content-Type":"application/json","X-CSRF-TOKEN":n()},credentials:"include"}),t=await o.json();if(!o.ok)throw o.status===401&&!await a()?new Error("Session expired. Please log in again."):new Error(t.error);return t},h=async()=>{const s=localStorage.getItem("current-profile"),e=JSON.parse(s);if(!e)throw new Error("Profile is missed!");const r=await fetch(`/api/delete-profile/${e.profile_id}/${e.profile_name}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":n()},credentials:"include"}),o=await r.json();if(!r.ok)throw r.status===401&&!await a()?new Error("Session expired. Please log in again."):new Error(o.error);return o};export{c as a,l as b,p as c,h as d,d as u};
