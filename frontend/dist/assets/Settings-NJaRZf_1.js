import{i as b,_ as u,j as e,l as k,b as P,S as y,V as B,ac as S,$ as C}from"./index-BzrmovQz.js";import{u as L}from"./index.esm-C_fh7bl5.js";import{M as v}from"./MiniSpinner-C6AtcdwL.js";import{u as N,B as w}from"./Button-BK6QROTg.js";import{u as _,d as E}from"./Profiles-q3MQUWsp.js";import{U as M}from"./UseHandleSessionExpired-l32uQQMk.js";import"./utils-D2yItgFG.js";function O({onProfileNameChange:s}){const o=localStorage.getItem("current-profile"),n=M(),c=b(),x=(o?JSON.parse(o):null).profile_name,{register:p,handleSubmit:a,formState:{errors:d}}=L(),{mutate:g,isLoading:t}=N({mutationFn:r=>_(r),onSuccess:r=>{s(r.new_name),u.success(r.message||"Profile name updated")},onError:r=>{r.message==="Session expired. Please log in again."&&n(),u.error(r.message||"An Error occurred")}}),f=()=>{c("/profiles")},{mutate:m,isLoading:i}=N({mutationFn:()=>E(),onSuccess:()=>{localStorage.removeItem("current-profile"),c("/profiles",{replace:!0})},onError:r=>{r.message==="Session expired. Please log in again."&&n(),u.error(r.message||"An Error occurred")}}),j=r=>{const h=r.change_user.trim();g(h)};return e.jsxs("form",{className:"flex flex-col gap-5 mt-10",onSubmit:a(j),children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:gap-10 items-start md:items-center",children:[e.jsx("label",{htmlFor:"change_user",className:"block font-instrumentSemiBold text-lightBlack-1 text-lg md:text-[1.2rem]",children:"Change Profile Name"}),e.jsx("input",{placeholder:x,type:"text",className:"pl-5 border-lightBlack-2 p-1 border-[0.5px] rounded-md focus:outline-none focus:border-primaryPurple focus:shadow-sm focus:shadow-primaryPurple w-full md:w-auto",id:"change_user",maxLength:"25",...p("change_user",{maxLength:"Max 25 char is allowed",validate:r=>r.trim()!==""||"Whitespaces are not allowed"})})]}),d.change_user&&e.jsx("p",{className:"text-red font-instrumentBold mt-2",children:d.change_user.message}),e.jsx("hr",{className:"my-5 border-t-[3px] border-light-grey-2 w-full"}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{disabled:t||i,type:"delete",typeForm:!1,onclick:m,children:i?e.jsx(v,{}):"Delete"}),e.jsx(w,{type:"update",typeForm:!0,children:t?e.jsx(v,{}):"Update"})]}),e.jsx(w,{type:"change-profile",typeForm:!1,onclick:f,disabled:t||i,children:"Change Profile"})]})]})}function A(){const[s,o]=k.useState("Manage Profile"),n=P(),[c,l]=k.useState(!1),x=b(),p=M(),[a,d]=k.useState(()=>{const r=localStorage.getItem("current-profile");return r?JSON.parse(r):null}),g=a.profile_name,t=a.current_user,f=r=>{const h={...a,profile_name:r};d(h),localStorage.setItem("current-profile",JSON.stringify(h)),n(S(r))},{mutate:m,isLoading:i}=N({mutationFn:()=>C(),onSuccess:()=>x("/login",{replace:!0}),onError:r=>{r.message==="Session expired. Please log in again."&&p(),u.error(r.message||"An Error occurred")}}),j=()=>{switch(s){case"Manage Profile":return e.jsx(O,{onProfileNameChange:f});default:return null}};return e.jsx("main",{className:"flex justify-center items-center h-screen bg-grey",children:i?e.jsx(y,{}):e.jsxs("section",{className:"bg-white flex rounded-md shadow-sm overflow-hidden w-[80%] max-lg:flex-col max-lg:w-full",children:[e.jsxs("aside",{className:"bg-light-grey-2 p-6 w-2/4 border-r border-light-grey hidden lg:block",children:[e.jsxs("div",{className:"mb-10",children:[e.jsxs("h3",{className:"max-xs:text-[.8rem] text-lg text-lightBlack-3 mb-2",children:["Current User:"," ",e.jsx("strong",{className:"text-lightBlack-1",children:t})]}),e.jsxs("h3",{className:"max-xs:text-[.8rem] text-lg text-lightBlack-3",children:["Chosen Profile:"," ",e.jsx("strong",{className:"text-lightBlack-1",children:g})]})]}),e.jsxs("ul",{children:[e.jsxs("li",{className:`flex items-center gap-3 p-2 my-5 ${s==="Manage Profile"?"bg-grey cursor-default":"hover:bg-grey cursor-pointer"} rounded-md group transition-colors duration-300`,onClick:()=>o("Manage Profile"),children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`ionicon max-sm:w-4 w-5 ${s==="Manage Profile"?"text-lightBlack-1":"text-lightBlack-3 group-hover:text-lightBlack-1"} transition-colors duration-300`,viewBox:"0 0 512 512",children:[e.jsx("path",{d:"M344 144c-3.92 52.87-44 96-88 96s-84.15-43.12-88-96c-4-55 35-96 88-96s92 42 88 96z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),e.jsx("path",{d:"M256 304c-87 0-175.3 48-191.64 138.6C62.39 453.52 68.57 464 80 464h352c11.44 0 17.62-10.48 15.65-21.4C431.3 352 343 304 256 304z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"})]}),e.jsx("span",{className:`${s==="Manage Profile"?"text-lightBlack-1":"text-lightBlack-3 group-hover:text-lightBlack-1"} max-sm:text-[.8rem] transition-colors duration-300`,children:"Manage Profile"})]}),e.jsxs("li",{className:`flex items-center gap-3 p-2 ${s==="logOut"?"bg-grey cursor-default":"hover:bg-grey cursor-pointer"} rounded-md group transition-colors duration-300`,onClick:()=>m(),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ionicon w-5 text-red",viewBox:"0 0 512 512",children:e.jsx("path",{d:"M304 336v40a40 40 0 01-40 40H104a40 40 0 01-40-40V136a40 40 0 0140-40h152c22.09 0 48 17.91 48 40v40M368 336l80-80-80-80M176 256h256",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})}),e.jsx("span",{className:"text-red transition-colors duration-300",children:"LogOut"})]})]})]}),c&&e.jsxs("aside",{className:"bg-light-grey-2 p-6 w-full border-b border-light-grey fixed inset-0 z-10 overflow-y-auto lg:hidden",children:[e.jsx("button",{className:"mb-4",onClick:()=>l(!1),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ionicon w-6 h-6",viewBox:"0 0 512 512",children:[e.jsx("title",{children:"Close"}),e.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144M368 144L144 368"})]})}),e.jsxs("div",{className:"mb-10",children:[e.jsxs("h3",{className:"text-lg text-lightBlack-3 mb-2",children:["Current User:"," ",e.jsx("strong",{className:"text-lightBlack-1",children:t})]}),e.jsxs("h3",{className:"text-lg text-lightBlack-3",children:["Chosen Profile:"," ",e.jsx("strong",{className:"text-lightBlack-1",children:g})]})]}),e.jsxs("ul",{children:[e.jsxs("li",{className:`flex items-center gap-3 p-2 my-5 ${s==="Manage Profile"?"bg-grey cursor-default":"hover:bg-grey cursor-pointer"} rounded-md group transition-colors duration-300`,onClick:()=>{o("Manage Profile"),l(!1)},children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`ionicon w-5 ${s==="Manage Profile"?"text-lightBlack-1":"text-lightBlack-3 group-hover:text-lightBlack-1"} transition-colors duration-300`,viewBox:"0 0 512 512",children:[e.jsx("path",{d:"M344 144c-3.92 52.87-44 96-88 96s-84.15-43.12-88-96c-4-55 35-96 88-96s92 42 88 96z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),e.jsx("path",{d:"M256 304c-87 0-175.3 48-191.64 138.6C62.39 453.52 68.57 464 80 464h352c11.44 0 17.62-10.48 15.65-21.4C431.3 352 343 304 256 304z",fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"32"})]}),e.jsx("span",{className:`${s==="Manage Profile"?"text-lightBlack-1":"text-lightBlack-3 group-hover:text-lightBlack-1"} transition-colors duration-300`,children:"Manage Profile"})]}),e.jsxs("li",{className:`flex items-center gap-3 p-2 ${s==="logOut"?"bg-grey cursor-default":"hover:bg-grey cursor-pointer"} rounded-md group transition-colors duration-300`,onClick:()=>{m(),l(!1)},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ionicon w-5 text-red",viewBox:"0 0 512 512",children:e.jsx("path",{d:"M304 336v40a40 40 0 01-40 40H104a40 40 0 01-40-40V136a40 40 0 0140-40h152c22.09 0 48 17.91 48 40v40M368 336l80-80-80-80M176 256h256",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})}),e.jsx("span",{className:"text-red transition-colors duration-300",children:"LogOut"})]})]})]}),e.jsxs("div",{className:"h-[720px] p-8 w-full relative max-lg:h-auto",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{className:"lg:hidden",onClick:()=>l(!0),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ionicon w-6 h-6",viewBox:"0 0 512 512",children:[e.jsx("title",{children:"Menu"}),e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M80 160h352M80 256h352M80 352h352"})]})}),e.jsx("h1",{className:"max-sm:text-base font-instrumentBold text-3xl",children:s}),e.jsx(B,{to:"/",className:"group",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ionicon w-10",viewBox:"0 0 512 512",children:[e.jsx("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z",fill:"lightGrey",stroke:"lightGrey",strokeMiterlimit:"10",strokeWidth:"32",className:"group-hover:fill-primaryPurple group-hover:stroke-primaryPurple transition-colors duration-300"}),e.jsx("path",{fill:"none",stroke:"grey",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M320 320L192 192M192 320l128-128",className:"group-hover:stroke-white transition-colors duration-300"})]})})]}),e.jsx("div",{className:"inset-x-0 absolute",children:e.jsx("hr",{className:"my-3 border-t-[3px] border-light-grey-2 w-full"})}),j()]})]})})}export{A as default};
