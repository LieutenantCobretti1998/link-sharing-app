import{b as P,a as L,c as R,l as f,t as D,H as F,j as e,S as B,J as G,K as I}from"./index-BzrmovQz.js";import{b as M,p as m}from"./BackgroundImages-D-XlPdqd.js";import{M as N}from"./Modal-TNlrPTYC.js";import{h as u,a as q,r as z}from"./ColorsConversion-vBm-ZwjX.js";import{U as T}from"./UseHandleSessionExpired-l32uQQMk.js";import{u as $}from"./useQuery-C7S_tcau.js";import"./utils-D2yItgFG.js";function V(){const c=P(),p=T(),{id:a}=L(),{data:t,isError:A,isLoading:b}=$({queryKey:["linksGroupPreview",a],queryFn:()=>I(a),enabled:!!a,onError:r=>{r.message==="Session expired. Please log in again."&&p()}}),{linksGroupName:j,links:w,shortDescription:k,linksGroupImage:x,textColor:n,commonColor:s,backgroundColor:i,backgroundImage:g,showModal:d}=a?t||{}:R(r=>r.saveChooses);console.log(t),f.useEffect(()=>{if(d){const r=setTimeout(()=>{c(D(!1))},5e3);return()=>clearTimeout(r)}},[d]),f.useEffect(()=>{t&&t.shorten_url&&c(F(t.shorten_url))},[t,c]);const v=r=>{const o=M.find(l=>l.value===r);return o?o.image:null},C=r=>{const o=m.find(l=>l.label===r);return o?o.color:null},y=r=>{const o=m.find(l=>l.label===r);return o?o.icon:null},S=()=>{const r=u(n),o=u(s),l=u(i),h=q([r,o,l]),E=z(h.r,h.g,h.b);c(G(E))};return f.useEffect(()=>{n&&s&&i&&n!=="#333333"&&s!=="#D9D9D9"&&i!=="#FFF"&&S()},[n,s,i]),b&&a?e.jsx(B,{}):e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"max-xs:top-[-140px] max-xs:h-1/2 drop-shadow-md relative top-[-120px] rounded-xl h-auto flex flex-col align-center justify-center",style:{backgroundColor:g?"white":i,backgroundImage:`url(${v(g)})`,backgroundSize:"cover",backgroundPosition:"center"},children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"300",height:"585",children:[x?e.jsx("foreignObject",{x:"105",y:"64",width:"96",height:"96",clipPath:"url(#screenClip)",className:"rounded-full border-4",style:{borderColor:s},children:e.jsx("div",{className:"w-full h-full",children:e.jsx("img",{src:x,alt:"Links Group",className:"w-full h-full"})})}):e.jsx("circle",{cx:"153.5",cy:"112",r:"48",fill:s}),e.jsx("rect",{width:"270",height:"20",x:"18",y:"185",fill:s,rx:"8"}),e.jsx("text",{x:"155",y:"195",fill:n,fontSize:"12",textAnchor:"middle",dominantBaseline:"middle",children:j}),e.jsx("rect",{width:"278",height:"30",x:"12",y:"214",fill:s,rx:"4"}),e.jsx("text",{x:"155",y:"230",fill:n,fontSize:"10",textAnchor:"middle",dominantBaseline:"middle",children:k}),w.map((r,o)=>e.jsx("g",{children:e.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx("rect",{width:"237",height:"44",x:"35",y:270+o*64,fill:C(r.label),rx:"8"}),e.jsx("g",{transform:`translate(45, ${284+o*64})`,children:y(r.label)}),e.jsx("text",{x:"70",y:296+o*64,fontSize:"14",fill:"white",children:r.label||`Link #${o+1}`}),e.jsx("g",{transform:`translate(250, ${284+o*64})`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:e.jsx("path",{fill:"#fff",d:"M2.667 7.333v1.334h8L7 12.333l.947.947L13.227 8l-5.28-5.28L7 3.667l3.667 3.666h-8Z"})})})]})},r.id))]})}),e.jsx(N,{text:"Please check the required fields in the profile section",isVisible:d})]})}export{V as default};
